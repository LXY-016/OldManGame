# 任务清单 - OldManGame

- [x] **第一阶段: 需求定义与规划** <!-- id: 0 -->
    - [x] **编写需求文档 (requirements.md)** <!-- id: 1 -->
    - [x] 确定核心玩法 (拖拽派发) <!-- id: 2 -->
    - [x] 确定视觉风格 (2.5D Q版/温馨) <!-- id: 3 -->
    - [x] 确认技术栈细节 (Vite+Three.js) <!-- id: 4 -->
    - [x] **细化关卡设计文档 (Layer 1 Game Level.md)** <!-- id: 4.1 -->

- [x] **第二阶段: 项目初始化 (3D 基础)** <!-- id: 5 -->
    - [x] 初始化 Node.js 项目 & 安装依赖 (Vite, Three.js) <!-- id: 6 -->
    - [x] 搭建文件结构 & 基础场景 (2.5D 相机设置) <!-- id: 7 -->

- [ ] **第三阶段: 核心功能开发 (MVP)** <!-- id: 8 -->
    - [/] **基础系统通用模块** <!-- id: 8.0 -->
        - [ ] 输入管理系统 (Input/DragSystem) <!-- id: 8.0.1 -->
        - [ ] 角色生成系统 (SpawnerSystem) <!-- id: 8.0.2 -->
        - [ ] 界面布局 (标题 + 开始/退出按钮) <!-- id: 8.1.1 -->
        - [ ] 场景切换逻辑 (主菜单 -> 游戏关卡) <!-- id: 8.1.2 -->
    - [ ] **实现关卡选择界面 (Layer 2)** <!-- id: 8.2 -->
        - [ ] 关卡地图/列表 UI 渲染 <!-- id: 8.2.1 -->
        - [ ] 存档读取与关卡解锁状态逻辑 <!-- id: 8.2.2 -->
    - [ ] **实现 HUD 界面 (Layer 1)** <!-- id: 9 -->
        - [ ] 左上角：分数计数器 & 倒计时组件 <!-- id: 9.1 -->
        - [ ] 右上角：暂停/退出按钮 & 弹窗逻辑 <!-- id: 9.2 -->
    - [ ] **实现底部社工操作栏** <!-- id: 10 -->
        - [ ] 社工头像渲染 & 状态切换 (待机/工作/冷却) <!-- id: 10.1 -->
        - [ ] 拖拽交互逻辑 (DOM -> Canvas 坐标映射) <!-- id: 10.2 -->
    - [ ] **实现 3D 场景交互** <!-- id: 11 -->
        - [ ] 老人生成器 (Spawner) & 寻路逻辑 <!-- id: 11.1 -->
        - [ ] 需求气泡 UI (跟随 3D 坐标) <!-- id: 11.2 -->
    - [ ] **实现属性与事件系统 (Function 1)** <!-- id: 1.1 -->
        - [ ] 定义事件类型 (E01-E05) 与社工属性枚举 <!-- id: 1.1.1 -->
        - [ ] 实现 T-Request (响应倒计时) 与 T-Action (工作读条) 逻辑 <!-- id: 1.1.2 -->
        - [ ] 实现属性匹配与时间减免计算公式 <!-- id: 1.1.3 -->
    - [ ] **实现核心游戏循环** <!-- id: 12 -->
        - [ ] 倒计时结束结算逻辑 <!-- id: 12.1 -->
        - [ ] 得分与飘字动效 <!-- id: 12.2 -->

- [ ] **第四阶段: 联网排行榜** <!-- id: 13 -->
    - [ ] 设计排行榜 API 接口 <!-- id: 14 -->
    - [ ] 前端对接排行榜数据 <!-- id: 15 -->

---

# 历史实施计划记录 (Implementation Plans)

## [已完成] 实施计划 - 3D 基础搭建 (Phase 2)

**目标**: 使用 Vite 和 Three.js 初始化一个现代化的 Web 开发环境，并渲染一个基础的 3D 场景。

### 1. 项目配置
- **package.json**:
    - 添加运行依赖: `three`
    - 添加开发依赖: `vite`
    - 脚本: `dev` (启动), `build` (打包)

### 2. 源代码结构
- **index.html**: 游戏主入口，包含 Canvas 容器。
- **style.css**: 样式重置，确保全屏显示。
- **src/Main.js**: 初始化 Three.js 核心组件（场景、相机、渲染器），创建示例旋转立方体。

### 3. 验证步骤
1. 运行 `npm install`。
2. 运行 `npm run dev`。
3. 访问 localhost，确认看到旋转的绿色立方体。
